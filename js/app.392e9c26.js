(function(e){function t(t){for(var a,o,c=t[0],u=t[1],s=t[2],l=0,p=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},i=[];function o(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"14229491"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var i,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(e);var s=new Error;i=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,n[1](s)}r[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:u})}),12e4);u.onerror=u.onload=i,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/nem-authn-sp/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"4a5e":function(e,t,n){"use strict";n("7e36")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{color:"primary",dark:"",app:"","clipped-left":""}},[n("v-toolbar-title",[n("router-link",{staticClass:"toolbar__top v-toolbar__content",attrs:{to:"/"}},[e._v("NEM Authn Prototype")])],1),n("v-spacer"),n("v-btn",{attrs:{text:"",to:"/"}},[e._v("Home")]),e.$auth.isAuthenticated?e._e():n("v-btn",{attrs:{text:""},on:{click:e.login}},[e._v("Log in")]),e.$auth.isAuthenticated?n("v-btn",{attrs:{text:""},on:{click:e.logout}},[e._v("Log out")]):e._e(),n("v-btn",{attrs:{text:"",to:"/signup"}},[e._v("SignUp")]),n("v-btn",{attrs:{text:"",href:"/enterprise",target:"_blank"}},[e._v("About")])],1),n("v-main",[n("v-container",{attrs:{fluid:""}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),n("router-view",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{data:e.oaMosaics}})],1),n("v-footer",{attrs:{app:""}},[n("div",{staticStyle:{margin:"0 auto"}},[e._v("ツイベガ君 & みやとも")])])],1)],1)},i=[],o=(n("4de4"),n("7db0"),n("0481"),n("caad"),n("d81d"),n("4069"),n("b0c0"),n("d3b7"),n("ac1f"),n("2532"),n("3ca3"),n("1276"),n("ddb0"),n("5530")),c=n("b85c"),u=(n("96cf"),n("1da1")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]},[n("div",{staticClass:"fullview"},[n("div",{staticClass:"loading-spacer"}),n("vue-loading",{attrs:{type:"spiningDubbles",color:"#aaa",size:{width:"100px",height:"100px"}}})],1)])},l=[],d=n("d523"),p={name:"Loading",components:{VueLoading:d["VueLoading"]}},h=p,f=(n("68c7"),n("2877")),m=Object(f["a"])(h,s,l,!1,null,null,null),g=m.exports,v={data:function(){return{drawer:null,loading:!1,oaMosaics:[]}},watch:{"$auth.user":{immediate:!0,handler:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,i,u,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t||!this.$auth.isAuthenticated){e.next=25;break}return this.loading=!0,n=[],a=[],e.prev=4,e.next=7,this.$nem.getOwnedMosaics(this.$auth.user.nickname);case 7:r=e.sent,console.log(r),i=Object(c["a"])(r);try{for(i.s();!(u=i.n()).done;)s=u.value,n.includes(s.mosaicId.namespaceId)||(n.push(s.mosaicId.namespaceId),a.push(this.$nem.getMosaicDetail(s.mosaicId.namespaceId)))}catch(d){i.e(d)}finally{i.f()}return e.next=13,Promise.all(a);case 13:l=e.sent,l=l.flat(2).filter((function(e){return e.imageUrl&&""!==e.imageUrl})).map((function(e){return{imageUrl:e.imageUrl,name:e.mosaic.id.name,namespaceId:e.mosaic.id.namespaceId}})),console.log(l),this.oaMosaics=r.map((function(e){var t=l.find((function(t){return t.name===e.mosaicId.name&&t.namespaceId===e.mosaicId.namespaceId}));return Object(o["a"])({quantity:e.quantity},t)})).filter((function(e){return e.imageUrl})),e.next=22;break;case 19:throw e.prev=19,e.t0=e["catch"](4),new Error(e.t0);case 22:return e.prev=22,this.loading=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[4,19,22,25]])})));function t(t){return e.apply(this,arguments)}return t}()}},methods:{login:function(){this.$auth.loginWithRedirect()},logout:function(){this.$auth.logout({returnTo:window.location.origin+"/"+window.location.pathname.split("/")[1]})}},components:{Loading:g}},b=v,w=(n("034f"),Object(f["a"])(b,r,i,!1,null,null,null)),_=w.exports,x=n("8c4f"),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("img",{attrs:{alt:"Vue logo",src:n("cf05")}}),a("HelloWorld",{attrs:{data:e.data}})],1)},k=[],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h1",[e._v("Welcome to NEM Authn")]),n("p",[e._v(" このサイトはNEMで認証を行うNEM Authnのプロトタイプサイトです。 ")]),n("h3",[e._v("Summary")]),n("div",[e._v(" NEM AuthnはNEMの請求書によるうんぬんかんぬん。ピーヒャララ ")]),e.data.length>0?n("div",{staticStyle:{"margin-top":"16px"}},[n("h3",[e._v("Authticated Result")]),n("v-row",e._l(e.data,(function(t,a){return n("v-col",{key:a,staticClass:"d-flex child-flex",attrs:{cols:"6",sm:"6",md:"6",lg:"3",xl:"3"}},[n("v-img",{staticClass:"grey lighten-2",attrs:{src:t.imageUrl,"aspect-ratio":"1"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)})],1)})),1)],1):e._e(),n("h3",[e._v("Contact")]),e._m(0)])},C=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("a",{attrs:{href:"https://twitter.com/tuibegakun",target:"_blank",rel:"noopener"}},[e._v("ツイベガ君")])]),n("li",[n("a",{attrs:{href:"https://twitter.com/miyatomo_38",target:"_blank",rel:"noopener"}},[e._v("みやとも")])])])}],j={name:"HelloWorld",props:{data:{type:Array}}},R=j,I=(n("4a5e"),Object(f["a"])(R,O,C,!1,null,"68275114",null)),$=I.exports,A={name:"home",props:{data:{type:Array}},components:{HelloWorld:$}},S=A,E=Object(f["a"])(S,y,k,!1,null,null,null),M=E.exports,P=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},U=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v("This is an signup page")])])}],W={},T=Object(f["a"])(W,P,U,!1,null,null,null),N=T.exports;a["default"].use(x["a"]);var L=[{path:"/",name:"Home",component:M},{path:"/signup",name:"Signup",component:N},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],z=new x["a"]({mode:"history",base:"/nem-authn-sp/",routes:L}),H=z,V=n("ce5b"),q=n.n(V);n("bf40");a["default"].use(q.a);var D,J,Y={},F=new q.a(Y),Q=n("8160"),Z=(n("841c"),n("15fd")),B=n("9767"),G=function(){return window.history.replaceState({},document.title,window.location.pathname)},K=function(e){var t=e.onRedirectCallback,n=void 0===t?G:t,r=e.redirectUri,i=void 0===r?window.location.origin+"/"+window.location.pathname.split("/")[1]:r,c=Object(Z["a"])(e,["onRedirectCallback","redirectUri"]);return D||(D=new a["default"]({data:function(){return{loading:!0,isAuthenticated:!1,user:{},auth0Client:null,popupOpen:!1,error:null}},methods:{loginWithPopup:function(e,t){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n.popupOpen=!0,a.prev=1,a.next=4,n.auth0Client.loginWithPopup(e,t);case 4:a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](1),console.error(a.t0);case 9:return a.prev=9,n.popupOpen=!1,a.finish(9);case 12:return a.next=14,n.auth0Client.getUser();case 14:n.user=a.sent,n.isAuthenticated=!0;case 16:case"end":return a.stop()}}),a,null,[[1,6,9,12]])})))()},handleRedirectCallback:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.auth0Client.handleRedirectCallback();case 4:return t.next=6,e.auth0Client.getUser();case 6:e.user=t.sent,e.isAuthenticated=!0,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.error=t.t0;case 13:return t.prev=13,e.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})))()},loginWithRedirect:function(e){return this.auth0Client.loginWithRedirect(e)},getIdTokenClaims:function(e){return this.auth0Client.getIdTokenClaims(e)},getTokenSilently:function(e){return this.auth0Client.getTokenSilently(e)},getTokenWithPopup:function(e){return this.auth0Client.getTokenWithPopup(e)},logout:function(e){return this.auth0Client.logout(e)}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(B["a"])(Object(o["a"])(Object(o["a"])({},c),{},{client_id:c.clientId,redirect_uri:i}));case 2:if(e.auth0Client=t.sent,t.prev=3,!window.location.search.includes("code=")||!window.location.search.includes("state=")){t.next=10;break}return t.next=7,e.auth0Client.handleRedirectCallback();case 7:a=t.sent,r=a.appState,n(r);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),e.error=t.t0;case 15:return t.prev=15,t.next=18,e.auth0Client.isAuthenticated();case 18:return e.isAuthenticated=t.sent,t.next=21,e.auth0Client.getUser();case 21:return e.user=t.sent,e.loading=!1,t.finish(15);case 24:case"end":return t.stop()}}),t,null,[[3,12,15,24]])})))()}}),D)},X={install:function(e,t){e.prototype.$auth=K(t)}},ee=(n("a4d3"),n("e01a"),n("fb6a"),n("2ca0"),n("bc3a")),te="https://snnode.supernode.me:7891",ne="https://s3.amazonaws.com/open-apostille-nemgallary-production/",ae=function(){return J||(J=new a["default"]({methods:{getOwnedMosaics:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ee["get"]("".concat(te,"/account/mosaic/owned?address=").concat(e)).then((function(e){return e.data.data.filter((function(e){return e.quantity>0&&"nem"!==e.mosaicId.namespaceId&&"xem"!==e.mosaicId.name}))})));case 1:case"end":return t.stop()}}),t)})))()},getMosaicDetail:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ee["get"]("".concat(te,"/namespace/mosaic/definition/page?pageSize=50&namespace=").concat(e)).then((function(e){return e.data.data=e.data.data.map((function(e){return e.imageUrl=e.mosaic.description.startsWith("oa:")?ne+e.mosaic.description.slice(3)+".jpg":"",e})),e.data.data})));case 1:case"end":return t.stop()}}),t)})))()}}}),J)},re={install:function(e){e.prototype.$nem=ae()}};a["default"].use(X,{domain:Q["b"],clientId:Q["a"],onRedirectCallback:function(e){H.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}}),a["default"].use(re),a["default"].config.productionTip=!1,new a["default"]({vuetify:F,router:H,render:function(e){return e(_)}}).$mount("#app")},"68c7":function(e,t,n){"use strict";n("9db2")},"7e36":function(e,t,n){},8160:function(e){e.exports=JSON.parse('{"b":"marumie.us.auth0.com","a":"boW2wD5YN1zYakV8SVxQONdOzetWZFab"}')},"85ec":function(e,t,n){},"9db2":function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.392e9c26.js.map